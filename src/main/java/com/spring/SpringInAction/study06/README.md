11장
======

# 스프링 WebFlux 사용하기

스프링 MVC 와 같은 서블릿 기반의 웹프레임워크는 **스레드 블로킹**과 **다중 스레드**로 수행된다.  
즉, 요청을 처리할 때 **스레드 풀**에서 **작업 스레드**를 가져와서 해당 요청을 처리하고,  
**작업 스레드**가 종료될 때까지 **요청 스레드**는 **블로킹**된다.  

그러나 **비동기 웹 프레임워크**(이벤트 루핑을 적용한 프레임워크)는 더 **적은 수**의 스레드로 더 많은 요청을 처리할 수 있기에 **경제적**이다.  
좀 더 이야기하자면 처리하는데 10초가 걸리는 작업이 있다면 기존에는 10초가 걸리는 작업이 끝날때 까지 스레드가 기다렸다면,  
이제는 10초 걸리는 작업을 실행하고 그에 대한 콜백을 등록해두고 다른 요청을 처리하다가 10초짜리 작업 끝나면 이벤트 받아서 처리한다는 것  

이게 뭔 뜻이냐면 기존에는 아래처럼 요청 하나가 들어오면 처리될때까지 다음 요청을 받을 수 없었지만  
<img src="https://user-images.githubusercontent.com/8858991/111618166-62f11180-8827-11eb-8b59-4cae5a47b493.png">

비동기 웹 프레임워크에서는 요청 들어오면 작업 실행하고 콜백 등록해두고 다음 요청을 처리할 수 있다는 뜻  
<img src="https://user-images.githubusercontent.com/8858991/111618193-697f8900-8827-11eb-9c8b-5da5d2357beb.png">

## 리액티브 컨트롤러 작성하기  
Flux 와 Mono 타입을 리턴 타입으로 가지도록 컨트롤러를 작성하면 된다.  
하지만 단순히 컨트롤러의 리턴타입 뿐만 아니라 이후에 사용되는(Service, Repository 등) 코드에서도 리액티브 형식을 따라야한다.  

### 단일 값 반환하기 
```java
@GetMapping("/mono")
public Mono<MonoDTO> getMono() {
    return Mono.just(new MonoDTO("data1", "data2"));
}
```

### 리액티브하게 입력 처리하기




